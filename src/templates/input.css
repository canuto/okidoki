@tailwind base;
@tailwind components;
@tailwind utilities;

/* Ensure all commonly used classes are included */
@layer utilities {
  /* Force include typography classes */
  .prose { }
  
  /* Force include DaisyUI alert colors */
  .alert-success, .alert-info, .alert-warning, .alert-error { }
  
  /* Force include DaisyUI components */
  .btn, .btn-primary, .btn-secondary { }
  .navbar, .menu, .drawer, .drawer-toggle { }
  
  /* Ensure consistent navbar height and fonts across all pages */
  .navbar {
    min-height: 4rem !important; /* 64px - matches documentation page */
  }
  
  /* Fix menu-lg padding in navbar context - prevents extra height on desktop */
  .navbar .menu-lg :where(li:not(.menu-title) > *:not(ul, details, .menu-title)),
  .navbar .menu-lg :where(li:not(.menu-title) > details > summary:not(.menu-title)) {
    padding-top: 0.25rem !important; /* Reduce from 0.75rem to 0.25rem */
    padding-bottom: 0.25rem !important; /* Reduce from 0.75rem to 0.25rem */
  }
  
  /* Force consistent navbar padding for all elements */
  .navbar * {
    line-height: 1.5 !important; /* Consistent line height */
  }
  
  /* Consistent navbar font sizes - using !important to match doc page specificity */
  .navbar .btn,
  .navbar a {
    font-size: 0.875rem !important; /* text-sm equivalent */
  }
  
  .navbar .font-bold {
    font-size: 1rem !important; /* text-base for logo/title */
  }
  .tab, .tab-content, .tabs, .tabs-bordered { }
  .badge, .badge-primary, .badge-success, .badge-info, .badge-warning, .badge-error { }
  
  /* Force include common spacing classes */
  .p-1, .p-2, .p-3, .p-4, .p-5, .p-6, .p-8 { }
  .m-1, .m-2, .m-3, .m-4, .m-5, .m-6, .m-8 { }
  .mt-1, .mt-2, .mt-4, .mt-6, .mt-8 { }
  .mb-1, .mb-2, .mb-4, .mb-6, .mb-8 { }
  .mx-auto, .my-4 { }
  

  
  /* Force include text classes */
  .text-sm, .text-base, .text-lg, .text-xl, .text-2xl { }
  .font-bold, .font-medium, .font-semibold { }
  
  /* Fix HTTP method badge alignment in headings */
  .badge { }
  
  /* Force include layout classes */
  .block, .inline-block, .flex, .grid { }
  .w-full, .h-full, .max-w-none { }
  .border, .rounded, .shadow { }
}

/* Custom OkiDoki Component Overrides */
@layer components {
  /* Fix excessive padding around codeblocks in tabs */
  .tabs .tab-content {
    padding: 1rem !important; /* Reduce from default p-6 (1.5rem) to 1rem */
    max-width: 100% !important; /* Prevent content from exceeding container */
    overflow-x: auto !important; /* Enable horizontal scrolling for wide content */
    box-sizing: border-box !important; /* Include padding in width calculation */
  }
  
  .tabs .tab-content pre {
    margin: 0.5rem 0 !important; /* Reduce vertical margins on code blocks */
    max-width: 100% !important; /* Constrain code block width */
    overflow-x: auto !important; /* Enable horizontal scrolling */
    box-sizing: border-box !important; /* Include padding in width calculation */
  }
  
  .tabs .tab-content pre code {
    padding: 0.75rem !important; /* Reasonable padding inside code blocks */
    line-height: 1.45 !important; /* Better line height for code */
    max-width: none !important; /* Allow code to be as wide as needed */
    white-space: pre !important; /* Preserve whitespace and prevent wrapping */
  }
  
  /* Add bottom margin to tabs container and constrain width */
  .tabs {
    margin-bottom: 1.5rem !important; /* Add space at bottom of tabs */
    max-width: 100% !important; /* Prevent tabs from exceeding page width */
    overflow-x: auto !important; /* Enable horizontal scrolling if needed */
    box-sizing: border-box !important; /* Include borders/padding in width */
  }
  
  /* Reduce alert box height for single-line content */
  .alert {
    padding: 0.75rem 1rem !important; /* Reduce from default padding */
    min-height: auto !important; /* Remove minimum height constraint */
  }
  
  .alert span {
    line-height: 1.4 !important; /* Better line height for single lines */
  }
  
  .alert span p {
    margin: 0 !important; /* Remove paragraph margins inside alerts */
  }
  
  /* Fix HTTP method badge vertical alignment in headings */
  h1 .badge, h2 .badge, h3 .badge, h4 .badge, h5 .badge, h6 .badge {
    vertical-align: baseline !important;
    margin-top: -0.375rem !important; /* Lift badges higher in headings */
    display: inline-block !important;
  }
  
  /* Better table cell text wrapping for mobile */
  .prose table {
    width: 100% !important;
    table-layout: auto !important;
  }
  
  .prose table td,
  .prose table th {
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    hyphens: auto !important;
    min-width: 0 !important;
    max-width: 0 !important; /* Force equal column distribution */
  }
  
  /* Make code elements in table cells wrap nicely */
  .prose table td code,
  .prose table th code {
    white-space: normal !important;
    word-break: break-all !important;
    overflow-wrap: break-word !important;
    hyphens: none !important;
    font-size: 0.8rem !important;
    line-height: 1.3 !important;
    padding: 0.125rem 0.25rem !important;
    display: inline !important;
  }
  
  /* Responsive table cell sizing */
  @media (max-width: 767px) {
    .prose table td,
    .prose table th {
      padding: 0.25rem 0.375rem !important;
      font-size: 0.8rem !important;
      line-height: 1.4 !important;
    }
    
         .prose table td code,
     .prose table th code {
       font-size: 0.75rem !important;
     }
   }
   
   /* Copy to clipboard button for code blocks */
   .code-block-container {
     position: relative !important;
   }
   
   .copy-button {
     z-index: 10 !important;
     transition: opacity 0.2s ease !important;
     background-color: rgba(0, 0, 0, 0.7) !important; /* Dark background for visibility */
     color: white !important; /* White text/icon for contrast */
     border: 1px solid rgba(255, 255, 255, 0.2) !important;
   }
   
   .copy-button:hover {
     background-color: rgba(0, 0, 0, 0.9) !important;
     opacity: 1 !important;
   }
   
   .code-block-container:hover .copy-button {
     opacity: 1 !important;
   }
   
   /* Success state for copy button */
   .copy-button.copied {
     background-color: rgb(34 197 94) !important; /* green-500 */
     color: white !important;
   }
   
   .copy-button.copied svg {
     display: none;
   }
   
   .copy-button.copied::after {
     content: "âœ“";
     font-size: 0.875rem;
     font-weight: bold;
   }
  
  /* Override DaisyUI automatic dropdown focus behavior for search dropdowns */
  .dropdown:focus-within [id*="search-results"].hidden,
  .dropdown:focus [id*="search-results"].hidden {
    visibility: hidden !important;
    opacity: 0 !important;
    transform: scale(0.95) !important;
  }
  
  /* Theme switcher icon visibility based on DaisyUI themes */
  /* Default: show sun, hide moon */
  .theme-sun-icon {
    opacity: 1;
  }
  
  .theme-moon-icon {
    opacity: 0;
  }
  
  /* Dark themes: hide sun, show moon */
  [data-theme="dark"] .theme-sun-icon,
  [data-theme="forest"] .theme-sun-icon,
  [data-theme="night"] .theme-sun-icon,
  [data-theme="black"] .theme-sun-icon,
  [data-theme="luxury"] .theme-sun-icon,
  [data-theme="dracula"] .theme-sun-icon,
  [data-theme="halloween"] .theme-sun-icon,
  [data-theme="business"] .theme-sun-icon,
  [data-theme="synthwave"] .theme-sun-icon,
  [data-theme="cyberpunk"] .theme-sun-icon,
  [data-theme="coffee"] .theme-sun-icon,
  [data-theme="dim"] .theme-sun-icon,
  [data-theme="sunset"] .theme-sun-icon {
    opacity: 0;
  }
  
  [data-theme="dark"] .theme-moon-icon,
  [data-theme="forest"] .theme-moon-icon,
  [data-theme="night"] .theme-moon-icon,
  [data-theme="black"] .theme-moon-icon,
  [data-theme="luxury"] .theme-moon-icon,
  [data-theme="dracula"] .theme-moon-icon,
  [data-theme="halloween"] .theme-moon-icon,
  [data-theme="business"] .theme-moon-icon,
  [data-theme="synthwave"] .theme-moon-icon,
  [data-theme="cyberpunk"] .theme-moon-icon,
  [data-theme="coffee"] .theme-moon-icon,
  [data-theme="dim"] .theme-moon-icon,
  [data-theme="sunset"] .theme-moon-icon {
    opacity: 1;
  }

  /* Dark theme typography overrides */
  [data-theme="dark"] .prose h1,
  [data-theme="dark"] .prose h2,
  [data-theme="dark"] .prose h3,
  [data-theme="dark"] .prose h4,
  [data-theme="dark"] .prose h5,
  [data-theme="dark"] .prose h6 {
    color: #e2e8f0 !important;
  }
  [data-theme="dark"] .prose p {
    color: #cbd5e1 !important;
  }
  [data-theme="dark"] .prose ul,
  [data-theme="dark"] .prose ol {
    color: #cbd5e1 !important;
  }
  [data-theme="dark"] .prose li {
    color: #cbd5e1 !important;
  }
  [data-theme="dark"] .prose table {
    color: #cbd5e1 !important;
  }
  [data-theme="dark"] .prose th {
    color: #e2e8f0 !important;
    border-color: #475569 !important;
  }
  [data-theme="dark"] .prose td {
    border-color: #475569 !important;
  }
  [data-theme="dark"] .prose a {
    color: #60a5fa !important;
  }
  [data-theme="dark"] .prose a:hover {
    color: #93c5fd !important;
  }
  [data-theme="dark"] .prose strong {
    color: #f8fafc !important;
  }
  [data-theme="dark"] .prose em {
    color: #e2e8f0 !important;
  }
  [data-theme="dark"] .prose code {
    color: #f8fafc !important;
    background-color: #1e293b !important;
    padding: 0.2em 0.4em !important;
    border-radius: 0.25rem !important;
  }
  
  /* Fix code block styling in dark mode */
  [data-theme="dark"] .prose pre {
    background-color: #0d1117 !important;
    color: #c9d1d9 !important;
    line-height: 1.45 !important;
    border: 1px solid #30363d !important;
  }
  
  [data-theme="dark"] .prose pre code {
    background-color: transparent !important;
    color: inherit !important;
    padding: 0 !important;
    line-height: inherit !important;
    font-size: inherit !important;
  }
  
  /* Ensure highlight.js styles work properly in dark mode */
  [data-theme="dark"] .hljs {
    background: #0d1117 !important;
    color: #c9d1d9 !important;
    line-height: 1.45 !important;
  }
  
  /* Fix line height for code blocks in light mode too */
  [data-theme="light"] .prose pre {
    line-height: 1.45 !important;
  }
  
  [data-theme="light"] .prose pre code {
    line-height: inherit !important;
  }
  
  /* General hljs line-height fix for both themes */
  .hljs {
    line-height: 1.45 !important;
  }
  
  /* Search highlighting styles */
  .search-highlight {
    background-color: #fef08a !important;
    color: #854d0e !important;
    padding: 0.1em 0.2em !important;
    border-radius: 0.2em !important;
    font-weight: 500 !important;
  }

  [data-theme="dark"] .search-highlight {
    background-color: #ca8a04 !important;
    color: #fefce8 !important;
    box-shadow: 0 0 0 1px rgba(251, 191, 36, 0.3) !important;
  }

  /* Custom OkiDoki Component Overrides */
  .tabs .tab-content pre {
    display: block !important;
    margin: 0 !important;
    padding: 0.75rem !important;
    background-color: #1f2937 !important;
    border-radius: 0.375rem !important;
    white-space: pre !important;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Menlo, monospace !important;
    font-size: 0.875rem !important;
    line-height: 1.45 !important;
    overflow-x: auto !important;
  }
  
  .tabs .tab-content pre code {
    display: inline !important;
    background: transparent !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
    white-space: pre !important;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Menlo, monospace !important;
    font-size: inherit !important;
    line-height: inherit !important;
  }
  
  /* Preserve whitespace on ALL nested elements but KEEP their colors */
  .tabs .tab-content pre code *,
  .tabs .tab-content pre code span {
    white-space: pre !important;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Menlo, monospace !important;
  }
  
  /* Add bottom margin to tabs container */
  .tabs {
    margin-bottom: 1.5rem !important;
  }
  
  /* Alert styling improvements */
  .alert {
    padding: 0.75rem 1rem !important;
    min-height: auto !important;
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
  }
  
  .alert,
  .alert-success,
  .alert-error,
  .alert-warning,
  .alert-info {
    border: none !important;
    border-width: 0 !important;
    border-color: transparent !important;
    box-shadow: none !important;
    outline: none !important;
    border-radius: 0.5rem !important;
  }
  
  .alert::before,
  .alert::after,
  .alert-success::before,
  .alert-success::after,
  .alert-error::before,
  .alert-error::after,
  .alert-warning::before,
  .alert-warning::after,
  .alert-info::before,
  .alert-info::after {
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
  }
  
  .alert span {
    line-height: 1.4 !important;
  }
  
  .alert span p {
    margin: 0 !important;
  }
  
  .alert *,
  .alert p,
  .alert ul,
  .alert ol,
  .alert li,
  .alert code,
  .alert pre,
  .alert blockquote,
  .alert h1, .alert h2, .alert h3, .alert h4, .alert h5, .alert h6,
  .alert strong,
  .alert em,
  .alert a {
    border: none !important;
    border-width: 0 !important;
    border-color: transparent !important;
    box-shadow: none !important;
    outline: none !important;
  }

  /* Performance and layout optimizations */
  html, body {
    overscroll-behavior: none !important;
    overscroll-behavior-x: none !important;
    overscroll-behavior-y: none !important;
  }
  
  * {
    -webkit-overflow-scrolling: touch;
  }
  
  .navbar {
    z-index: 1000 !important;
  }
  
  .drawer-side {
    z-index: 999 !important;
  }
  
  .drawer-content {
    overscroll-behavior: none !important;
  }
  
  /* Search result styling */
  #search-results,
  #search-results-mobile,
  #search-results-mobile-navbar {
    display: flex !important;
    flex-direction: column !important;
  }
  
  #search-results > li,
  #search-results-mobile > li,
  #search-results-mobile-navbar > li {
    width: 100% !important;
    display: block !important;
    flex: none !important;
  }
  
  #search-results > li > a,
  #search-results-mobile > li > a,
  #search-results-mobile-navbar > li > a {
    width: 100% !important;
    display: block !important;
  }
  
  #search-results > li > a:focus,
  #search-results-mobile > li > a:focus,
  #search-results-mobile-navbar > li > a:focus {
    background-color: rgb(var(--fallback-p,oklch(0.491 0.162 255.701))/0.2) !important;
    outline: 2px solid rgb(var(--fallback-p,oklch(0.491 0.162 255.701))) !important;
    outline-offset: -2px !important;
    border-radius: 0.375rem !important;
  }
  
  [data-theme="dark"] #search-results > li > a:focus,
  [data-theme="dark"] #search-results-mobile > li > a:focus,
  [data-theme="dark"] #search-results-mobile-navbar > li > a:focus {
    background-color: rgb(var(--fallback-p,oklch(0.491 0.162 255.701))/0.3) !important;
    outline: 2px solid rgb(var(--fallback-p,oklch(0.491 0.162 255.701))) !important;
  }
  
  /* Safari-specific focus enhancement */
  @supports (-webkit-appearance: none) {
    #search-results > li > a:focus,
    #search-results-mobile > li > a:focus,
    #search-results-mobile-navbar > li > a:focus {
      background-color: #3b82f6 !important;
      color: white !important;
      box-shadow: 0 0 0 2px #3b82f6, inset 0 0 0 1px rgba(255,255,255,0.2) !important;
    }
    
    [data-theme="dark"] #search-results > li > a:focus,
    [data-theme="dark"] #search-results-mobile > li > a:focus,
    [data-theme="dark"] #search-results-mobile-navbar > li > a:focus {
      background-color: #60a5fa !important;
      color: #1e293b !important;
      box-shadow: 0 0 0 2px #60a5fa, inset 0 0 0 1px rgba(0,0,0,0.1) !important;
    }
  }

  /* Layout and navigation fixes */
  @media (min-width: 1024px) {
    #sidebar-menu {
      top: 4rem !important;
    }
  }
  
  .navbar .btn,
  .navbar a {
    font-size: 0.875rem !important;
  }
  
  .navbar .font-bold {
    font-size: 1rem !important;
  }
  
  .page-nav-container {
    position: sticky;
    top: 5rem;
  }
  
  /* Dropdown and navigation */
  details[open] summary svg {
    transform: rotate(180deg);
  }
  
  summary::-webkit-details-marker {
    display: none;
  }
  
  summary::marker {
    display: none;
  }
  
  @media (max-width: 1023px) {
    .desktop-nav-fixed {
      display: none !important;
    }
    .flex-nav-container {
      display: block !important;
    }
    .copy-button {
      z-index: 1 !important;
    }
  }
  
  .dropdown-content {
    z-index: 9999 !important;
  }
  
  .copy-button {
    z-index: 10 !important;
  }
  
  .lg\\:hidden .dropdown-content {
    z-index: 10000 !important;
    position: relative;
  }
}