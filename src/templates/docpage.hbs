{{#extend "layout"}}
{{#content "main"}}  
    {{#unless layout.hideBreadcrumbs}}
    <div class="breadcrumbs text-sm pl-4 mt-6 lg:mt-6">
      <ul>
        <li><a href="{{joinUrl baseUrl 'index.html'}}">Home</a></li>
        {{#each breadcrumbs}}
          <li>{{this}}</li>
        {{/each}}
      </ul>
    </div>
    {{/unless}}
    
    {{#if layout.pagenav}}
    <!-- Mobile dropdown navigation -->
    {{#if pageNavigation}}
    <div class="lg:hidden mb-6 relative z-50">
      <div class="dropdown dropdown-bottom w-full">
        <div tabindex="0" role="button" class="btn btn-outline w-full justify-between">
          <span class="text-sm font-semibold uppercase tracking-wide">On This Page</span>
          <svg class="w-4 h-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </div>
        <ul tabindex="0" class="dropdown-content menu menu-sm bg-base-100 border border-base-300 rounded-lg shadow-lg w-full mt-1 p-2 z-[9999]">
          {{#each pageNavigation}}
            <li>
              <a href="#{{this.slug}}">{{this.title}}</a>
              {{#if this.children}}
              <ul>
                {{#each this.children}}
                <li>
                  <a href="#{{this.slug}}">{{this.title}}</a>
                  {{#if this.children}}
                  <ul>
                    {{#each this.children}}
                    <li><a href="#{{this.slug}}">{{this.title}}</a></li>
                    {{/each}}
                  </ul>
                  {{/if}}
                </li>
                {{/each}}
              </ul>
              {{/if}}
            </li>
          {{/each}}
        </ul>
      </div>
    </div>
    {{/if}}
    
        <!-- Layout container for content + navigation -->
    <div class="flex-nav-container" style="display: flex; gap: 24px;">
      <!-- Main content -->
      <div style="flex: 1; min-width: 0;">
        <div class="prose dark:prose-invert {{#if layout.fullWidth}}!max-w-none{{else}}!max-w-[920px]{{/if}} p-2 lg:m-2 prose-td:[&[align=right]]:text-right prose-td:[&[align=center]]:text-center prose-th:[&[align=right]]:text-right prose-th:[&[align=center]]:text-center">
          {{{html}}}    
        </div>
      </div>
      
      <!-- Right column navigation (desktop only) -->
      {{#if pageNavigation}}
      <div class="desktop-nav-fixed" style="width: 300px; flex-shrink: 0;">
        <div style="position: sticky; top: 120px; max-height: calc(100vh - 140px); overflow-y: auto;">
          <div class="bg-base-100 border-l border-base-300 pl-4">
            <div class="pb-3 border-b border-base-300 mb-4">
              <h3 class="text-sm font-semibold text-base-content mb-0 uppercase tracking-wide">On This Page</h3>
            </div>
            <div>
              <ul class="menu menu-sm w-full">
                {{#each pageNavigation}}
                  <li>
                    <a href="#{{this.slug}}">{{this.title}}</a>
                    {{#if this.children}}
                    <ul>
                      {{#each this.children}}
                      <li>
                        <a href="#{{this.slug}}">{{this.title}}</a>
                        {{#if this.children}}
                        <ul>
                          {{#each this.children}}
                          <li><a href="#{{this.slug}}">{{this.title}}</a></li>
                          {{/each}}
                        </ul>
                        {{/if}}
                      </li>
                      {{/each}}
                    </ul>
                    {{/if}}
                  </li>
                {{/each}}
              </ul>
            </div>
          </div>
        </div>
      </div>
      {{/if}}
    </div>
    {{else}}
    <!-- Default layout without navigation -->
    <div class="prose dark:prose-invert {{#if layout.fullWidth}}!max-w-none{{else}}!max-w-[920px]{{/if}} p-2 lg:m-2 prose-td:[&[align=right]]:text-right prose-td:[&[align=center]]:text-center prose-th:[&[align=right]]:text-right prose-th:[&[align=center]]:text-center">
      {{{html}}}    
    </div>
    {{/if}}
{{/content}}
{{/extend}}